<% layout('/layouts/boilerplate') -%>

<div class="container mt-4">
  <h1>Mentors in <%= domain %></h1>

  <% if (mentors && mentors.length > 0) { %>
    <ul>
        <% mentors.forEach(mentor => { %>
            <li>
                <h2><%= mentor.name %></h2>
                <p><%= mentor.bio %></p>
                <p>Expertise: <%= mentor.expertise.join(', ') %></p>
                <p>Availability:</p>
                <ul>
                    <% mentor.availability.forEach(slot => { %>
                        <li>
                            Start Time: <%= slot.start_time %> - End Time: <%= slot.end_time %>
                            <% if (!slot.is_booked) { %>
                                <span style="color: green;">(Available)</span>
                                <form action="/book-session" method="POST" class="mt-2">
                                    <input type="hidden" name="mentor_id" value="<%= mentor._id %>">
                                    <input type="hidden" name="slot_id" value="<%= slot._id %>">
                                    <label for="duration">Select Duration:</label>
                                    <select name="duration" id="duration">
                                        <option value="30">30 Minutes</option>
                                        <option value="45">45 Minutes</option>
                                        <option value="60">60 Minutes</option>
                                    </select>
                                    <button type="submit" class="btn btn-primary mt-2">Book Now</button>
                                </form>
                            <% } else { %>
                                <span style="color: red;">(Booked)</span>
                            <% } %>
                        </li>
                    <% }); %>
                </ul>
            </li>
        <% }); %>
    </ul>
<% } else { %>
    <p>No mentors found for this domain.</p>
<% } %>

</div>
